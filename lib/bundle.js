!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("concent")):"function"==typeof define&&define.amd?define(["exports","react","concent"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["concent-i18n"]={},e.React,e.concent)}(this,function(e,o,u){"use strict";var t,n=(t=o)&&"object"==typeof t&&"default"in t?t:{default:t};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function s(r){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?c(Object(o),!0).forEach(function(e){var t,n;t=r,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))})}return r}function a(e){function t(e){return"object"===(n=r(e))?{}.toString.call(e).slice(8,-1).toLowerCase():n}var n;return{type:t(e),name:"function"===(n=t(e=e))?e.name:"undefined"===n?void 0:e.constructor.name}}function i(e,t,n){try{if(!e&&!t)return"";var r=-1===e.indexOf(".")?t[e]:e.split(".").reduce(function(e,t){try{return e[t]}catch(e){return""}},t);if(console.log(r),"string"!==a(r).type)return"";var o=n&&"object"===a(n).type?Object.keys(n):[];return o.length?o.reduce(function(e,t){return e.replace("{".concat(t,"}"),n[t])},r):r||""}catch(e){return console.log(e),""}}function f(e,t){return n.default.createElement(g,{path:e,msg:t})}var g=o.memo(function(e){var t=e.path,n=e.msg,r=u.useConcent({module:"cxy_react_i18n"}).moduleComputed.i18nMessage;return o.useMemo(function(){return i(t,r,n)},[t,r,n])},function e(t,n){if(t===n)return!0;if("object"===a(t)&&"object"===a(n)&&Object.keys(t).length===Object.keys(n).length){for(var r in t)if(t.hasOwnProperty(r)&&!e(t[r],n[r]))return!1}else{if("array"!==a(n)||"array"!==a(t)||t.length!==n.length)return!1;for(var o=0,u=t.length;o<u;o++)if(!e(t[o],n[o]))return!1}return!0}),l="cxy_react_i18n",d="cxy_react_i18n";function m(e){return e?u.getComputed()[d][e]||"":u.getComputed()[d]}function y(e){return e?u.getState()[d][e]||"":u.getState()[d]}function p(e){u.reducer[d].setLang(e)}function b(e){u.reducer[d].setMessage(e)}function j(e){u.reducer[d].editMessage(e)}function O(e){u.reducer[d].delMessage(e)}function M(e,t){return e&&m("i18nMessage")?i(e,m("i18nMessage"),t):""}function v(e){var t=u.useConcent({module:l}).moduleComputed;return o.useMemo(function(){return e?t[e]||"":t},[t,e])}function h(e,t){var n=u.useConcent({module:l}).moduleComputed.i18nMessage;return o.useMemo(function(){return i(e,n,t)},[e,t,n])}function x(e){var t=u.useConcent({module:l}).moduleState;return o.useMemo(function(){return e?t[e]||"":t},[t,e])}function C(){u.getState("cxy_react_i18n")||u.configure("cxy_react_i18n",S)}var S={state:{lang:"",message:""},computed:{i18nMessage:{depKeys:["lang","message"],compare:!0,fn:function(e){var t=e.lang,e=e.message;return t&&e&&e[t]?e[t]:{}}},i18nLangKeys:{depKeys:["message"],compare:!0,fn:function(e){e=e.message;return Object.keys(e)}}},reducer:{setLang:function(e,t,n){if(e&&n.moduleComputed.i18nLangKeys.includes(e))return{lang:e}},setMessage:function(e){if(e&&"object"===a(e).type)return{message:s({},e)}},editMessage:function(e,t,n){if(e&&"object"===a(e).type)return{message:s({},function n(r,o){return"object"!=a(r).type||"object"!=a(o).type?void 0===o?r:o:Object.keys(s(s({},r),o)).reduce(function(e,t){return e[t]=n(r[t],o[t]),e},Array.isArray(r)?[]:{})}(t.message,e))}},delMessage:function(e,t,n){if(e&&e!=t.lang&&n.moduleComputed.i18nLangKeys.includes(e))return delete t.message[e],{message:s({},t.message)}}}},T=g,I=f,_=g,P=f,L=p,w=p,K=b,k=b,R=j,D=j,$=O,E=O,q=y,A=y,z=m,B=m,F=M,G=M,H=M,J={runI18n:C,RenderI18nKeyToText:T,renderI18nKeyToText:I,useI18nComputed:v,useI18nText:h,useI18nState:x,setLang:L,setMessage:K,editMessage:R,delMessage:$,getState:q,getComputed:z,getLocaleText:F,sl:w,sm:k,em:D,dm:E,gs:A,gc:B,Rt:_,rt:P,$t:f,gt:G,$tt:H};e.$t=f,e.$tt=H,e.RenderI18nKeyToText=T,e.Rt=_,e.default=J,e.delMessage=$,e.dm=E,e.editMessage=R,e.em=D,e.gc=B,e.getComputed=z,e.getLocaleText=F,e.getState=q,e.gs=A,e.gt=G,e.renderI18nKeyToText=I,e.rt=P,e.runI18n=C,e.setLang=L,e.setMessage=K,e.sl=w,e.sm=k,e.useI18nComputed=v,e.useI18nState=x,e.useI18nText=h,Object.defineProperty(e,"__esModule",{value:!0})});
